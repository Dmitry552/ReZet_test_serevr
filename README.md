# ReZet_test_server

## Запуск проекта
 
1.`npm install` - Установка зависимостей

2.`npm run dev` - Запуск проекта

## Общее

Сервер работает на порту `5000`;

## Регистрация и авторизация

>На клиенте не реализованы формы для регистрации и авторизации. **`Но логика данного процесса реализована на сервере.`**
Если отправить `POST` запрос на адрес `api/user/registration` с данными `body: {email: <какой-то Email>, password: <Пароль от 3 до 10 >}` то произойдет регистрация,
и в базе данных будет создана запись.

## Удаление и создание товаров

> При попытке удалить какой-то товар из базы данных отправив `DELETE` запрос на адрес `api/product?productId=<Id какого-то продукта>` товар тоже реально удалится из базы данных.

>При попытке создать товар отправив `POST` запрос на адрес `api/product` с данными: 
`body:` 
  `{`
    `title: <Название товара >`
    `price: <Цена товара>`
    `description: <Описание товара>`
    `image: <url адрес картинки: к примеру: https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg>`
  `}`
товар будет создан в базе данных

`Для удаления в header запроса передается параметр "Authorization": "Bearer XXXXXXXXXX.XXXXXXXXXXXX.XXXXXXXXXXX" c JWT токеном. При разборе которого и выделяется id пользователя. Его тоже при удалении необходимо отправить. JWT позвращается ответом вместе с пользователем при регистрации, авторизации или просто аутентификации`

>По умолчанию в базу данных загружено 10 товаров.

База данных [MongoDB Atlas](https://cloud.mongodb.com/v2/60df15c435c4aa57a1eaef70#clusters)

## URL адреса для взаимодействия с API

|Адрес запроса               |Описание                        |Тип запроса    |
|----------------------------|--------------------------------|---------------|
|`api/user/login`            |Авторизация                     |`POST`         |
|`api/user/registration`     |Регистрация                     |`POST`         |
|`api/user/auth`             |Аутентификация                  |`GET`          |
|**`api/basket/...`**        |**Работа с корзиной**           |               |
|`api/basket`                |Добавить продукт в корзину      |`POST`         |
|`api/basket/update`         |Обновить данные о товаре        |`POST`         |
|`api/basket`                |Получение корзины пользователя  |`GET`          |
|`api/basket`                |Удалить продукт из корзины      |`DELETE`       |
|`api/basket/clear`          |Очистка корзины                 |`DELETE`       |
|**`api/product/...`**       |**Работа с продуктами**         |               |
|`api/product`               |Вывод продуктов                 |`GET`          |
|`api/product`               |Создать продукт                 |`POST`         |
|`api/product`               |Удаление продукта               |`DELETE`       |
|**`api/ordering/...`**      |**Оформление заказа**           |               |
|`api/ordering`              |Отправляет письмо на Email с данными о покупке |`POST`         

**`Email заданный в форме должен быть настоящим. Именно на него происходит отправка данных!!!`**

